<script>
    let countdown;
    let isPaused = false;
    let startTime;
    let remainingTime = 0;
    let previousButton = null;

    function startTimer(seconds, buttonElement) {
        const timerDisplay = document.getElementById("timerDisplay");

        // If same button is clicked again (toggle pause/resume)
        if (buttonElement === previousButton && countdown) {
            if (!isPaused) {
                clearInterval(countdown);
                remainingTime -= Date.now() - startTime; // Update remainingTime correctly
                isPaused = true;
            } else {
                resumeTimer();
            }
            return;
        }

        // Reset for a new timer
        clearInterval(countdown);
        remainingTime = seconds * 1000;
        isPaused = false;
        previousButton = buttonElement;
        document.body.classList.remove("red-bg"); // Remove red background
        startTime = Date.now(); // Track when timer starts

        countdown = setInterval(updateTimer, 10);
    }

    function resumeTimer() {
        startTime = Date.now(); // Reset start time
        countdown = setInterval(updateTimer, 10);
        isPaused = false;
    }

    function updateTimer() {
        const timerDisplay = document.getElementById("timerDisplay");
        const elapsed = Date.now() - startTime;

        if (elapsed >= remainingTime) {
            clearInterval(countdown);
            timerDisplay.textContent = "00.00";
            document.body.classList.add("red-bg"); // Change background to red
        } else {
            const seconds = ((remainingTime - elapsed) / 1000).toFixed(2);
            timerDisplay.textContent = seconds < 10 ? `0${seconds}` : seconds;
        }
    }

    // Attach event listeners to timer buttons
    document.querySelectorAll(".timer-btn").forEach(button => {
        button.addEventListener("click", () => {
            const seconds = parseInt(button.dataset.time);
            startTimer(seconds, button);
        });
    });
</script>
